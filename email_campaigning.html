<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Email Campaigning</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="emailCampining.css" />

  
</head>

<body>

  <!-- Navbar -->
  <div class="navbar">
    <img src="menu.png" alt="Menu" class="open-btn" onclick="toggleDrawer()" />
    <span>My Website</span>
  </div>

  <!-- Drawer -->
  <div id="drawer" class="drawer">
    <a href="#" onclick="toggleSubMenu('home-submenu')">Contact</a>
    <div id="home-submenu" class="submenu">
      <a href="phone.html">Phone</a>
      <a href="email.html">Email</a>
    </div>

    <a href="#" onclick="toggleSubMenu('template-submenu')">Template</a>
    <div id="template-submenu" class="submenu">
      <a href="templatecontent.html">Template Content</a>
    </div>

    <a href="#" onclick="toggleSubMenu('campaigning-submenu')">Campaigning</a>
    <div id="campaigning-submenu" class="submenu">
      <a href="whatsapp_campaigning.html">WhatsApp Campaigning</a>
      <a href="email_campaigning.html">Email Campaigning</a>
      <a href="sms_campaigning.html">SMS Campaigning</a>
    </div>

    <a href="#">Contact</a>
  </div>

  <!-- Email Section -->
  <div class="email-section">
    <h2>Email Campaigning</h2>

    <div class="email-card">
      <div class="email-selection">
        <!-- Email Type -->
        <div>
          <label for="emailType">Choose Email Type:</label>
          <select id="emailType" onchange="toggleEmailInput()">
            <option value="all">All Email</option>
            <option value="selective">Selective Email</option>
          </select>
        </div>

        <!-- Template Dropdown -->
        <div>
          <label for="templateSelect">Select Template:</label>
          <select id="templateSelect" onchange="handleTemplateChange()">
            <option value="" disabled selected>Select Template</option>
            <option value="Template 1">Template 1</option>
            <option value="Template 2">Template 2</option>
            <option value="Template 3">Template 3</option>
          </select>
        </div>
      </div>

      <div id="templateValueSection" class="template-value-section">
        <label for="templateValue">Enter Value (number):</label>
        <input type="number" id="templateValue" placeholder="e.g., 100" onkeydown="handleEnterKey(event)" />
      </div>

      <!-- Selected Values Display -->
      <div id="selectedValuesDisplay">
        <!-- Tags with value will be displayed here -->
      </div>

      <!-- Conditional Email Input -->
      <div class="selective-email-section">
        <label for="emails">Enter Emails (comma separated):</label>
        <textarea id="emails" placeholder="Enter email addresses here..."></textarea>
      </div>

      <!-- Submit Button -->
      <button onclick="submitEmailCampaign()">Submit Campaign</button>
    </div>
  </div>

  <script>
    function toggleDrawer() {
      const drawer = document.getElementById('drawer');
      drawer.style.display = drawer.style.display === 'block' ? 'none' : 'block';
    }

    function toggleSubMenu(id) {
      const submenu = document.getElementById(id);
      submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
    }

    function toggleEmailInput() {
      const emailType = document.getElementById("emailType").value;
      const selectiveEmailSection = document.querySelector(".selective-email-section");
      selectiveEmailSection.style.display = emailType === "selective" ? "block" : "none";
    }

    function handleTemplateChange() {
      const templateSelect = document.getElementById("templateSelect");
      const templateValueSection = document.getElementById("templateValueSection");

      if (templateSelect.value) {
        templateValueSection.style.display = "block";
      } else {
        templateValueSection.style.display = "none";
      }
    }

    function handleEnterKey(event) {
      // Check if the Enter key (key code 13) is pressed
      if (event.key === "Enter") {
        event.preventDefault(); // Prevent form submission if it's in a form

        const valueInput = document.getElementById("templateValue");
        const value = valueInput.value;

        if (value && !isNaN(value)) {
          // Create the value tag
          const tag = document.createElement("div");
          tag.className = "selected-value";
          tag.innerHTML = `${value} <span class="remove-btn" onclick="removeValueTag(this)">×</span>`;
          
          // Append the tag to the display section
          document.getElementById("selectedValuesDisplay").appendChild(tag);

          // Clear the input field after adding the value
          valueInput.value = "";
        }
      }
    }

    function removeValueTag(span) {
      const tag = span.parentElement;
      tag.remove();
    }

    function submitEmailCampaign() {
      const emailType = document.getElementById("emailType").value;
      const selectedTemplate = document.getElementById("templateSelect").value || "None";
      const selectedValues = document.getElementsByClassName("selected-value");
      
      let values = [];
      for (let i = 0; i < selectedValues.length; i++) {
        values.push(selectedValues[i].textContent.replace('×', '').trim());
      }

      if (emailType === "all") {
        alert(`Submitting campaign to ALL emails\nTemplate: ${selectedTemplate}\nValues: ${values.join(', ')}`);
      } else {
        const emails = document.getElementById("emails").value;
        alert(`Submitting campaign to SELECTED emails:\n${emails}\nTemplate: ${selectedTemplate}\nValues: ${values.join(', ')}`);
      }
    }
  </script>
</body>

</html>
